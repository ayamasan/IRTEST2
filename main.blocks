<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="epEHwNvF~`+9,PLKY8J*">データ</variable><variable id="TqS3+(z#c9Xr4B~ce7)b">配列</variable><variable id="E.-v+mS}]^Wop$-0;Pgt">カウンター</variable><variable id="+p:(oNKI#4XFAsmIf[hL">IR入力</variable><variable id="h,+9U53L2$u`!=r11}_)">最後の受信時間</variable></variables><block type="pxt-on-start" id="xRRgvHNlG#rZ^u`HECiY" x="0" y="0"><statement name="HANDLER"><block type="bluetooth_start_uart_service" id="=?;nK,[lS:iQPAaE;V+w"><next><block type="device_show_number" id="EQ/R`;JI0lvlRc;wAl@x"><value name="number"><shadow type="math_number" id="v;-v,K_i.O6:atKKK=o1"><field name="NUM">0</field></shadow></value><next><block type="variables_set" id="Y9WGXyqsA!b%mG$9Fm!^"><field name="VAR" id="+p:(oNKI#4XFAsmIf[hL">IR入力</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_get_digital_pin" id="Zo.w*Ntx(dzf$o/@hK0%"><field name="name">DigitalPin.P0</field></block></value><next><block type="variables_set" id="k~Ox.R#DdVNYAxYGF,C="><field name="VAR" id="TqS3+(z#c9Xr4B~ce7)b">配列</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="EB|kwwLK5[le~Pcu0*2z"><mutation items="0" horizontalafter="3"></mutation></block></value><next><block type="variables_set" id=",y@KN2+.uEU+,=+lCS)v"><field name="VAR" id="epEHwNvF~`+9,PLKY8J*">データ</field><value name="VALUE"><shadow type="math_number" id="i58oXQANU~dtWDDNZ];4"><field name="NUM">0</field></shadow></value><next><block type="variables_set" id="^e?Iq1mDOJY07pH:z|l5"><field name="VAR" id="h,+9U53L2$u`!=r11}_)">最後の受信時間</field><value name="VALUE"><shadow type="math_number" id="wDCN2gUMQaLDCt:8bV$)"><field name="NUM">0</field></shadow><block type="control_running_time" id="d=/r7jt9pP@5,mli$_#+"></block></value></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="bluetooth_on_connected" id="!#xARqf_hNjk9(+llDmj" x="579" y="0"><statement name="HANDLER"><block type="basic_show_icon" id="3-M1`wS!@e@)}C6dnlaf"><field name="i">IconNames.Yes</field></block></statement></block><block type="bluetooth_on_disconnected" id="SBSvU9EKM8!2vik:I}Xr" x="855" y="0"><statement name="HANDLER"><block type="basic_show_icon" id="G?mjY2P1haLwf!Tqn%L$"><field name="i">IconNames.No</field></block></statement></block><block type="device_button_event" id="aqg}=.kesKbktnIwyf-8" x="778" y="183"><field name="NAME">Button.A</field><statement name="HANDLER"><block type="device_show_number" id="`K_vt!{)iKJxOXVJGK6_"><value name="number"><shadow type="math_number" id="[WAwOZc-S}Z!q:F?PZMa"><field name="NUM">0</field></shadow></value><next><block type="variables_set" id="h`-XR,|,zvZf=Sy3|/Z0"><field name="VAR" id="TqS3+(z#c9Xr4B~ce7)b">配列</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="13{5e]8v^lLl[zXI1Zn_"><mutation items="0" horizontalafter="3"></mutation></block></value><next><block type="variables_set" id="U;YGlXI.-{Z;`9by`X1K"><field name="VAR" id="epEHwNvF~`+9,PLKY8J*">データ</field><value name="VALUE"><shadow type="math_number" id="K3oI1c8DX$6TPTdoe:(v"><field name="NUM">0</field></shadow></value></block></next></block></next></block></statement></block><block type="pins_on_pulsed" id="k^`s!rs+8#;Emt-vhK)z" x="-6" y="381"><field name="pin">DigitalPin.P0</field><field name="pulse">PulseValue.High</field><comment pinned="false" h="80" w="160">IR受信テスト

パルス幅を測って、シリアル通信として受信する

受信した正パルス幅を配列に格納

BボタンでBluetoothに1つずつ送信

Aボタンでクリア</comment><statement name="HANDLER"><block type="controls_if" id="JzJSi!O[{@TM83guCO}P"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="@D/1^3L38rb;xvAwD3P4"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="XiwqSwTS=E@55kPn9YG="><field name="VAR" id="epEHwNvF~`+9,PLKY8J*">データ</field></block></value><value name="B"><shadow type="math_number" id="q:G[n+oU/86[,mQ8ytNf"><field name="NUM">1</field></shadow></value></block></value><statement name="DO0"><block type="array_push" id="-jmo[{PUcBm7ckrY,z,M"><value name="list"><block type="variables_get" id="8F!NE?46=pjiWXDskrQY"><field name="VAR" id="TqS3+(z#c9Xr4B~ce7)b">配列</field></block></value><value name="value"><block type="pins_pulse_duration" id="uc@_=6b0%36O^zReo9te"></block></value><next><block type="controls_if" id="NW?uW%MDR(e:IW%@Bou."><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="1Ehb|pYb8B3V`YwE8.LD"><field name="OP">GT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="pins_pulse_duration" id=")hD6^qL+5k7GI$i-MIMA"></block></value><value name="B"><shadow type="math_number" id="5m{]UBKv~tEDYh9`fK`I"><field name="NUM">20000</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="}rjE3M^-9?.LEgXYIx}["><field name="VAR" id="epEHwNvF~`+9,PLKY8J*">データ</field><value name="VALUE"><shadow type="math_number" id="~TZ?NxOQq[1J4:ukD]gZ"><field name="NUM">2</field></shadow></value></block></statement></block></next></block></statement></block></statement></block><block type="device_button_event" id="u7Yb2EsjP*xBj.DWk*,P" x="789" y="447"><field name="NAME">Button.B</field><statement name="HANDLER"><block type="controls_if" id="9k/`^Ex~gwtP5kLuWAcn"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="M;y4_?~b`8]OGd:.ywIj"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="OW.M#n$R+c8))Wgw=obS"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_length" id="=F}g)~VT*99Tw=XqJY.k"><value name="VALUE"><block type="variables_get" id="+ky`.2yHIe7@A$bwV-Av"><field name="VAR" id="TqS3+(z#c9Xr4B~ce7)b">配列</field></block></value></block></value></block></value><statement name="DO0"><block type="basic_show_arrow" id="Cfv;%{wTiPdx3|*#9qjS"><value name="i"><shadow type="device_arrow" id="H@RtQw+/b]HDjh!l=#Zf"><field name="arrow">ArrowNames.North</field></shadow></value><next><block type="pxt_controls_for" id="21{`;K#fLWs.SCH;aTTb"><value name="VAR"><shadow type="variables_get_reporter" id="!QR(+oDA[ohXDwsE^)FO"><field name="VAR" id="E.-v+mS}]^Wop$-0;Pgt">カウンター</field></shadow></value><value name="TO"><shadow type="math_whole_number"><field name="NUM">0</field></shadow><block type="lists_length" id="ajLB@JKOLljJP+iWf%QL"><value name="VALUE"><block type="variables_get" id="NIP*+ekfUnlA=lCWT+Jb"><field name="VAR" id="TqS3+(z#c9Xr4B~ce7)b">配列</field></block></value></block></value><statement name="DO"><block type="bluetooth_uart_writenumber" id="fL{~MeHG%q]^?Q-5.GC5"><value name="value"><block type="lists_index_get" id="FK@{Rwqui.ObCG[DuhvW"><value name="LIST"><block type="variables_get" id="[(JY@F%Z{IIx7B,peKLS"><field name="VAR" id="TqS3+(z#c9Xr4B~ce7)b">配列</field></block></value><value name="INDEX"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="V=X]E{DS^-:#bD@_X]tm"><field name="VAR" id="E.-v+mS}]^Wop$-0;Pgt">カウンター</field></block></value></block></value><next><block type="device_pause" id="?D%YiZqLJ3VQl,(~$|Mo"><value name="pause"><shadow type="timePicker" id="n9m!DMe6RM1xg/)Rrdr%"><field name="ms">20</field></shadow></value></block></next></block></statement><next><block type="basic_show_icon" id="];{OXXxgLo0mOnf]PoO$"><field name="i">IconNames.Happy</field></block></next></block></next></block></statement><statement name="ELSE"><block type="basic_show_icon" id="MjVTpgl:3@{R;^yvIRDd"><field name="i">IconNames.Asleep</field></block></statement><next><block type="device_clear_display" id="n0K)O6XZugc?e(%]PN[B"></block></next></block></statement></block><block type="pins_on_pulsed" id="!3+|c,_c{~-lpnn,Ly_I" x="-6" y="767"><field name="pin">DigitalPin.P0</field><field name="pulse">PulseValue.Low</field><statement name="HANDLER"><block type="controls_if" id="Sq}i`Gm.lvWWRRo.Eu9j"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="8-:4rd5Wp8)bCgbmMC:x"><field name="OP">LTE</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="5]nTC![3,q+`,-mfOp5t"><field name="VAR" id="epEHwNvF~`+9,PLKY8J*">データ</field></block></value><value name="B"><shadow type="math_number" id="b1d_i}DY]cT$_bR_1ybc"><field name="NUM">1</field></shadow></value></block></value><statement name="DO0"><block type="array_push" id="/9GBsbA*GYOV@Fku8|,["><value name="list"><block type="variables_get" id="w.a)!9QCy3nrQ+?hI;d;"><field name="VAR" id="TqS3+(z#c9Xr4B~ce7)b">配列</field></block></value><value name="value"><block type="pins_pulse_duration" id="}A={eQM@m(_:{Y..);ym"></block></value><next><block type="controls_if" id="|b|tycWh|i$oOvg6NpEv"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="W$!+x#lD:S)urTAz/Ndk"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="oz@)VD%sxfUjNGevi:f@"><field name="OP">GTE</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="?kE+E!xA[/xHxqYcpN^L"><field name="VAR" id="epEHwNvF~`+9,PLKY8J*">データ</field></block></value><value name="B"><shadow type="math_number" id="bPMN?H?-iKeZ1I8(/?fR"><field name="NUM">1</field></shadow></value></block></value><statement name="DO0"><block type="controls_if" id="CL$$zQcYKA=4FG_D-WiG"><value name="IF0"><shadow type="logic_boolean" id=";k2n}5x,sXGTQa}B)Tlf"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="]a[a_-wg4[WI+ln_IpU4"><field name="OP">GT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="pins_pulse_duration" id="6JOQhJ3/yL!?+*8q~mc("></block></value><value name="B"><shadow type="math_number" id="QEzP$-RAC$N=QQLKDPWK"><field name="NUM">20000</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="DUgLMk*td,}n,~eAcFRT"><field name="VAR" id="epEHwNvF~`+9,PLKY8J*">データ</field><value name="VALUE"><shadow type="math_number" id="V:iVWPR@z0P+Wjh8fD;J"><field name="NUM">2</field></shadow></value></block></statement></block></statement><statement name="ELSE"><block type="variables_set" id="k95q0?XGE]?G=Qt5y[{P"><field name="VAR" id="epEHwNvF~`+9,PLKY8J*">データ</field><value name="VALUE"><shadow type="math_number" id="8,c66Po($K|d9ZTg32;="><field name="NUM">1</field></shadow></value></block></statement><next><block type="variables_set" id="r/CG^E!3z({hpv5z.49A"><field name="VAR" id="h,+9U53L2$u`!=r11}_)">最後の受信時間</field><value name="VALUE"><shadow type="math_number" id="(L7B#`[#e]v6=ik!IGqS"><field name="NUM">0</field></shadow><block type="control_running_time" id="f9P-b89m(RBc?ED)Su}r"></block></value></block></next></block></next></block></statement></block></statement></block><block type="device_forever" id="PemQ{uwB;!ld:H4P|nTD" x="793" y="1118"><statement name="HANDLER"><block type="controls_if" id="!0S$6.*D%uM/UqK1G%@7"><value name="IF0"><shadow type="logic_boolean" id="CRc!%u:yF:H*LN)st~SL"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id=".+GY$#io]2+:S2p9q,9/"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="jkxD,,xd*GvOHbP=Y:M2" disabled="true"><field name="NUM">0</field></shadow><block type="variables_get" id="?5Q1eQl6jyH|mbpSN~T$"><field name="VAR" id="epEHwNvF~`+9,PLKY8J*">データ</field></block></value><value name="B"><shadow type="math_number" id="!S@0(U[ahHU]2;gAM#cn"><field name="NUM">1</field></shadow></value></block></value><statement name="DO0"><block type="controls_if" id="@,9jhKG*]@_c#2p]~$+:"><value name="IF0"><shadow type="logic_boolean" id="8R9l]?#`^9x@@5bV:s|0"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="#jYau=x]]uZ|]Me5pLy`"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="||;Qi5XjGgf4@3D9!BZs"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="$SeSWo/.NhX88O2VClJV"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="}=YRLgCs!M17~}3j0$k7" disabled="true"><field name="NUM">0</field></shadow><block type="control_running_time" id="w}99R:fBKd,qc-~hybHb"></block></value><value name="B"><shadow type="math_number" id="iVzF`I9%ey[cJNq:)o42" disabled="true"><field name="NUM">0</field></shadow><block type="variables_get" id="@3MvxZ(v!~#zuu;8;U7y"><field name="VAR" id="h,+9U53L2$u`!=r11}_)">最後の受信時間</field></block></value></block></value><value name="B"><shadow type="math_number" id="%{ykJN_geo*9g%^/*b`]"><field name="NUM">45</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="$:}|FTX1]P[m$~0aSUp;"><field name="VAR" id="epEHwNvF~`+9,PLKY8J*">データ</field><value name="VALUE"><shadow type="math_number" id="dFxGQ+IiUKEX@nbl+!}k"><field name="NUM">2</field></shadow></value><next><block type="device_show_number" id="vdU6eah!uy7mDg^MjM4`"><value name="number"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_length" id="`#^/l!7f)+iOr(V{t0)M"><value name="VALUE"><block type="variables_get" id="t(g2[cZ/+`#]:dt{9a]k"><field name="VAR" id="TqS3+(z#c9Xr4B~ce7)b">配列</field></block></value></block></value></block></next></block></statement></block></statement></block></statement></block></xml>